/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/index.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/cookie/index.js":
/*!**************************************!*\
  !*** ./node_modules/cookie/index.js ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/*!\n * cookie\n * Copyright(c) 2012-2014 Roman Shtylman\n * Copyright(c) 2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n\n\n/**\n * Module exports.\n * @public\n */\n\nexports.parse = parse;\nexports.serialize = serialize;\n\n/**\n * Module variables.\n * @private\n */\n\nvar decode = decodeURIComponent;\nvar encode = encodeURIComponent;\nvar pairSplitRegExp = /; */;\n\n/**\n * RegExp to match field-content in RFC 7230 sec 3.2\n *\n * field-content = field-vchar [ 1*( SP / HTAB ) field-vchar ]\n * field-vchar   = VCHAR / obs-text\n * obs-text      = %x80-FF\n */\n\nvar fieldContentRegExp = /^[\\u0009\\u0020-\\u007e\\u0080-\\u00ff]+$/;\n\n/**\n * Parse a cookie header.\n *\n * Parse the given cookie header string into an object\n * The object has the various cookies as keys(names) => values\n *\n * @param {string} str\n * @param {object} [options]\n * @return {object}\n * @public\n */\n\nfunction parse(str, options) {\n  if (typeof str !== 'string') {\n    throw new TypeError('argument str must be a string');\n  }\n\n  var obj = {}\n  var opt = options || {};\n  var pairs = str.split(pairSplitRegExp);\n  var dec = opt.decode || decode;\n\n  for (var i = 0; i < pairs.length; i++) {\n    var pair = pairs[i];\n    var eq_idx = pair.indexOf('=');\n\n    // skip things that don't look like key=value\n    if (eq_idx < 0) {\n      continue;\n    }\n\n    var key = pair.substr(0, eq_idx).trim()\n    var val = pair.substr(++eq_idx, pair.length).trim();\n\n    // quoted values\n    if ('\"' == val[0]) {\n      val = val.slice(1, -1);\n    }\n\n    // only assign once\n    if (undefined == obj[key]) {\n      obj[key] = tryDecode(val, dec);\n    }\n  }\n\n  return obj;\n}\n\n/**\n * Serialize data into a cookie header.\n *\n * Serialize the a name value pair into a cookie string suitable for\n * http headers. An optional options object specified cookie parameters.\n *\n * serialize('foo', 'bar', { httpOnly: true })\n *   => \"foo=bar; httpOnly\"\n *\n * @param {string} name\n * @param {string} val\n * @param {object} [options]\n * @return {string}\n * @public\n */\n\nfunction serialize(name, val, options) {\n  var opt = options || {};\n  var enc = opt.encode || encode;\n\n  if (typeof enc !== 'function') {\n    throw new TypeError('option encode is invalid');\n  }\n\n  if (!fieldContentRegExp.test(name)) {\n    throw new TypeError('argument name is invalid');\n  }\n\n  var value = enc(val);\n\n  if (value && !fieldContentRegExp.test(value)) {\n    throw new TypeError('argument val is invalid');\n  }\n\n  var str = name + '=' + value;\n\n  if (null != opt.maxAge) {\n    var maxAge = opt.maxAge - 0;\n\n    if (isNaN(maxAge) || !isFinite(maxAge)) {\n      throw new TypeError('option maxAge is invalid')\n    }\n\n    str += '; Max-Age=' + Math.floor(maxAge);\n  }\n\n  if (opt.domain) {\n    if (!fieldContentRegExp.test(opt.domain)) {\n      throw new TypeError('option domain is invalid');\n    }\n\n    str += '; Domain=' + opt.domain;\n  }\n\n  if (opt.path) {\n    if (!fieldContentRegExp.test(opt.path)) {\n      throw new TypeError('option path is invalid');\n    }\n\n    str += '; Path=' + opt.path;\n  }\n\n  if (opt.expires) {\n    if (typeof opt.expires.toUTCString !== 'function') {\n      throw new TypeError('option expires is invalid');\n    }\n\n    str += '; Expires=' + opt.expires.toUTCString();\n  }\n\n  if (opt.httpOnly) {\n    str += '; HttpOnly';\n  }\n\n  if (opt.secure) {\n    str += '; Secure';\n  }\n\n  if (opt.sameSite) {\n    var sameSite = typeof opt.sameSite === 'string'\n      ? opt.sameSite.toLowerCase() : opt.sameSite;\n\n    switch (sameSite) {\n      case true:\n        str += '; SameSite=Strict';\n        break;\n      case 'lax':\n        str += '; SameSite=Lax';\n        break;\n      case 'strict':\n        str += '; SameSite=Strict';\n        break;\n      case 'none':\n        str += '; SameSite=None';\n        break;\n      default:\n        throw new TypeError('option sameSite is invalid');\n    }\n  }\n\n  return str;\n}\n\n/**\n * Try decoding a string using a decoding function.\n *\n * @param {string} str\n * @param {function} decode\n * @private\n */\n\nfunction tryDecode(str, decode) {\n  try {\n    return decode(str);\n  } catch (e) {\n    return str;\n  }\n}\n\n\n//# sourceURL=webpack:///./node_modules/cookie/index.js?");

/***/ }),

/***/ "./src/ajax.js":
/*!*********************!*\
  !*** ./src/ajax.js ***!
  \*********************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/**\r\n * AJAX requests\r\n */\r\n\r\nmodule.exports = {\r\n\r\n    /**\r\n     * простой запрос\r\n     */\r\n    createRequest: function( method, url, callback ){\r\n\r\n        var request = new XMLHttpRequest();\r\n        request.open( method, url);\r\n        request.setRequestHeader('Content-Type', 'application/json');\r\n        request.addEventListener('readystatechange', callback);\r\n        return request;\r\n    },\r\n\r\n    /**\r\n     * запрос с авторизацией WP\r\n     */\r\n    createAuthRequest: function( method, url, callback, nonce){\r\n\r\n        var request = this.newRequest( method, url, callback );\r\n        request.setRequestHeader('X-WP-Nonce', nonce);\r\n        return request;\r\n    }\r\n}\n\n//# sourceURL=webpack:///./src/ajax.js?");

/***/ }),

/***/ "./src/cart.js":
/*!*********************!*\
  !*** ./src/cart.js ***!
  \*********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/**\r\n * ===================\r\n * === Cart ==========\r\n * ===================\r\n */\r\n\r\nvar cookie = __webpack_require__(/*! cookie */ \"./node_modules/cookie/index.js\");\r\n\r\n/**\r\n * Создает AJAX запрос\r\n */\r\nfunction createRequest( method, url, callback ){\r\n\r\n    var request = new XMLHttpRequest();\r\n    request.open( method, url );\r\n    request.setRequestHeader('Content-Type', 'application/json');\r\n    request.addEventListener( \"readystatechange\", callback );\r\n    return request;\r\n}\r\n\r\n/**\r\n * Создает AJAX запрос с авторизаций\r\n */\r\nfunction createAuthRequest( method, url, callback ){\r\n\r\n    var request = createRequest( method, url, callback );\r\n    // если пользователь залогинился - авторизируемся в запросе\r\n    if( cookie.parse( document.cookie ).logged_in === 'yes'){\r\n        request.setRequestHeader('X-WP-Nonce', REST_API_data.nonce);\r\n    }\r\n    return request;\r\n}\r\n\r\n/**\r\n * создаем запрос для получения содержания корзины \r\n*/\r\nfunction createGetRequest(){\r\n\r\n    var request = createAuthRequest(\r\n        'GET',\r\n        '/wp-json/cocart/v1/get-cart',\r\n        function( event ){\r\n            // если запрос выполнен не полностью - выходим\r\n            if( event.target.readyState != 4) return;\r\n            // если пустой ответ - выходим\r\n            if( event.target.responseText == \"\" ) return;\r\n            // парсим результат запроса\r\n            var resJSON = JSON.parse(event.target.responseText);\r\n            // рисуем полученные элементы\r\n            render(resJSON);\r\n        }\r\n    );\r\n\r\n    return request;\r\n}\r\n\r\n/**\r\n * создаем запрос для обновления корзины \r\n*/\r\nfunction createRefreshRequest(){\r\n\r\n    var request = createAuthRequest(\r\n        'GET',\r\n        '/wp-json/cocart/v1/get-cart',\r\n        function( event ){\r\n            // если запрос выполнен не полностью - выходим\r\n            if( event.target.readyState != 4) return;\r\n            // если пустой ответ - выходим\r\n            if( event.target.responseText == \"\" ) return;\r\n            // парсим результат запроса\r\n            var resJSON = JSON.parse(event.target.responseText);\r\n            // рисуем полученные элементы\r\n            render(resJSON);\r\n\r\n            for( [key, item] of Object.entries(resJSON) ){\r\n\r\n                var updateRequest = createAuthRequest(\r\n                    'POST',\r\n                    '/wp-json/cocart/v1/item',\r\n                    null\r\n                );\r\n                updateRequest.send(JSON.stringify({\r\n                    cart_item_key: key,\r\n                    quantity: item.quantity\r\n                }))\r\n            }\r\n\r\n    });\r\n\r\n    return request;\r\n}\r\n\r\n/**\r\n * создаем запрос для удаления\r\n*/\r\nfunction createDelRequest(){\r\n\r\n    var request = createAuthRequest(\r\n        'DELETE',\r\n        '/wp-json/cocart/v1/item',\r\n        function(event){\r\n\r\n            // если запрос выполнен не полностью - выходим\r\n            if( event.target.readyState != 4) return;\r\n            // получаем содержание корзины\r\n            var getRequest = createGetRequest();\r\n            getRequest.send();\r\n    });\r\n\r\n    return request;\r\n}\r\n\r\n/**\r\n * запрос для добавления\r\n */\r\nfunction createAddRequest(){\r\n\r\n    var request = createAuthRequest(\r\n        'POST', \r\n        '/wp-json/cocart/v1/add-item',\r\n        function(event){\r\n\r\n            // если запрос выполнен не полностью - выходим\r\n            if( event.target.readyState != 4) return;\r\n            // получаем содержание корзины\r\n            var getRequest = createGetRequest();\r\n            getRequest.send();\r\n    });\r\n\r\n    return request;\r\n}\r\n\r\n/**\r\n * Запрос для изменения количества\r\n */\r\nfunction createUpdateRequest(callback){\r\n\r\n    var request = createAuthRequest(\r\n        'POST',\r\n        '/wp-json/cocart/v1/item',\r\n        callback\r\n    )\r\n    return request;\r\n}\r\n\r\n/**\r\n * Рендеринг корзины \r\n*/\r\nfunction render(data){\r\n\r\n    // текст кнопки корзины\r\n    var cartButtonText = document.querySelector('.cart-button__text');\r\n\r\n    // получаем элемент корзины\r\n    var cartElement = document.querySelector('.cart ul');\r\n\r\n    // получаем элемент кнопки заказа\r\n    var checkoutButtonOuter = document.querySelector('.checkout-button__outer');\r\n\r\n    // создание внутренних элементов корзины\r\n    var createItem = function( el, cname, text){\r\n\r\n        var item = document.createElement(el);\r\n        item.classList.add(cname);\r\n        if ( text ) item.innerHTML = text;\r\n        return item;\r\n    }\r\n\r\n    // если корзина пустая\r\n    if ( data.length == 0 ){\r\n\r\n        cartElement.innerHTML = 'empty';\r\n        cartButtonText.innerHTML = 'empty';\r\n        checkoutButtonOuter.innerHTML = '';\r\n        return;\r\n    };\r\n    // очищаем список дочерних элементов\r\n    cartElement.innerHTML = '';\r\n    cartButtonText.innerHTML = Object.entries(data).length;\r\n\r\n    for ([key, item] of Object.entries(data)){\r\n        \r\n        // создаем элемент списка с дочерними элементами\r\n        var cartItem = createItem('li', 'cart__item');\r\n        var cartItemQuantity = createItem('div', 'cart__item-quantity', item.quantity);\r\n        var cartItemPlus = createItem('button', 'cart__item-plus', '+');\r\n        var cartItemMinus = createItem('button', 'cart__item-minus', '-');\r\n        var cartItemTitle = createItem('div', 'cart__item-title', item.product_title);\r\n        var cartItemPrice = createItem('div', 'cart__item-price', item.line_total);\r\n        var cartItemDelete = createItem('div', 'cart__item-delete', '<button><i class=\"far fa-times-circle\"></i></button>');\r\n        \r\n        // устанавливаем атрибуты data\r\n        cartItem.dataset.key = key;\r\n        cartItem.dataset.qty = item.quantity;\r\n\r\n        // добавляем элементы в DOM\r\n        cartItem.appendChild(cartItemTitle);\r\n        cartItem.appendChild(cartItemMinus);\r\n        cartItem.appendChild(cartItemQuantity);\r\n        cartItem.appendChild(cartItemPlus);\r\n        cartItem.appendChild(cartItemPrice);\r\n        cartItem.appendChild(cartItemDelete);\r\n        cartElement.appendChild(cartItem);\r\n\r\n        // обработчик кнопки удаления из корзины\r\n        cartItemDelete.addEventListener('click', function(e){\r\n            e.preventDefault();\r\n\r\n            var key = e.target.closest('li').dataset.key;\r\n            var delRequest = createDelRequest();\r\n            delRequest.send(JSON.stringify({\"cart_item_key\": key}));\r\n        });\r\n    \r\n        // обработка кнопок + и -\r\n        cartItemPlus.addEventListener('click', function(e){\r\n\r\n            e.preventDefault();\r\n            // получаем значения полей\r\n            var item = e.target.closest('.cart__item');\r\n            var qty = parseInt(item.dataset.qty) + 1;\r\n            var key = item.dataset.key;\r\n\r\n            var request = createUpdateRequest( function(e){\r\n\r\n                // если запрос выполнен не полностью - выходим\r\n                if( e.target.readyState != 4) return;\r\n                // если пустой ответ - выходим\r\n                if( e.target.responseText == \"\" ) return;\r\n                // парсим результат запроса\r\n                var res = JSON.parse(e.target.responseText)[key];\r\n\r\n                item.dataset.qty = res.quantity;\r\n                item.querySelector('.cart__item-quantity').innerText = res.quantity;\r\n                item.querySelector('.cart__item-price').innerText = res.line_total;\r\n            });\r\n\r\n            request.send(JSON.stringify({\r\n                cart_item_key: key,\r\n                quantity: qty,\r\n                return_cart: true\r\n            }))\r\n        });\r\n        cartItemMinus.addEventListener('click', function(e){\r\n\r\n            e.preventDefault();\r\n            // получаем значения полей\r\n            var item = e.target.closest('.cart__item');\r\n            var qty = parseInt(item.dataset.qty);\r\n            if( qty <= 1 ) return;\r\n            qty--;\r\n            var key = item.dataset.key;\r\n\r\n            var request = createUpdateRequest( function(e){\r\n\r\n                // если запрос выполнен не полностью - выходим\r\n                if( e.target.readyState != 4) return;\r\n                // если пустой ответ - выходим\r\n                if( e.target.responseText == \"\" ) return;\r\n                // парсим результат запроса\r\n                var res = JSON.parse(e.target.responseText)[key];\r\n\r\n                item.dataset.qty = res.quantity;\r\n                item.querySelector('.cart__item-quantity').innerText = res.quantity;\r\n                item.querySelector('.cart__item-price').innerText = res.line_total;\r\n            });\r\n\r\n            request.send(JSON.stringify({\r\n                cart_item_key: key,\r\n                quantity: qty,\r\n                return_cart: true\r\n            }))\r\n        });\r\n    };\r\n\r\n    // добавляем кнопку заказа\r\n    checkoutButtonOuter.innerHTML = '<a class=\"checkout-button transparrent-button\" href=\"/checkout\">Checkout</a>';\r\n}\r\n\r\n module.exports = {\r\n\r\n    /**\r\n     * Init\r\n     */\r\n    init: function(){\r\n\r\n        // если перешли после авторизации\r\n        if( window.location.href.match('cocart-load-cart=') ){\r\n            \r\n            // обновляем содержимое корзины\r\n            var getRequest = createRefreshRequest();\r\n        } else {\r\n            \r\n            // иначе просто получаем содержимое корзины\r\n            var getRequest = createGetRequest();\r\n        }\r\n        getRequest.send();\r\n    },\r\n\r\n    // добавление в корзину\r\n    add: function( id, qty ){\r\n\r\n        if ( !id ) return;\r\n        \r\n        var requestData = {\r\n\r\n            \"product_id\": id\r\n        }\r\n\r\n        if ( qty && qty > 0 ){\r\n\r\n            Object.assign(requestData, {\"quantity\": qty})\r\n        }\r\n\r\n        var addRequest = createAddRequest();\r\n        addRequest.send(JSON.stringify(requestData));\r\n    }\r\n\r\n }\n\n//# sourceURL=webpack:///./src/cart.js?");

/***/ }),

/***/ "./src/catalog.js":
/*!************************!*\
  !*** ./src/catalog.js ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/**\r\n * \r\n * Инициализация карточек товаров в каталоге\r\n * \r\n */\r\nvar cart = __webpack_require__(/*! ./cart.js */ \"./src/cart.js\");\r\nvar ajax = __webpack_require__(/*! ./ajax.js */ \"./src/ajax.js\");\r\nvar catalogCard = __webpack_require__(/*! ./catalogCard.js */ \"./src/catalogCard.js\");\r\nvar lookbookCard = __webpack_require__(/*! ./lookbookCard.js */ \"./src/lookbookCard.js\");\r\n\r\n/**\r\n * Запрос из каталога\r\n */\r\nfunction createGetRequest( url, callback){\r\n\r\n    var request = ajax.createRequest('GET', url, callback);\r\n    return request;\r\n}\r\n\r\n/**\r\n * Класс каталога\r\n */\r\nclass Catalog{\r\n\r\n    constructor(){\r\n        this.fpCatalog = document.querySelector('.fp-catalog');\r\n        this.catalog = document.querySelector('.catalog');\r\n        this.lbCatalog = document.querySelector('.lb-catalog');\r\n        // текущая страница каталога для динамической загрузки\r\n        this.currentPage = 1;\r\n        // каталог загружается\r\n        this.isLoad = false;\r\n        // текущая категория\r\n        this.currentCategory = 'all';\r\n        // выданы все элементы каталога\r\n        this.isEnd = false;\r\n\r\n        if ( this.fpCatalog ) {\r\n            // если главная страница - подгружаем каталог динамически\r\n            this.addCategoriesListeners();\r\n            this.getCategoryItems();\r\n\r\n        } else if ( this.lbCatalog ){\r\n            // если каталог лукбуков\r\n            this.addCategoriesListeners( {lookbook: true} );\r\n            this.getCategoryItems( {lookbook: true} );\r\n            this.addScrollListener();\r\n            \r\n        } else if ( this.catalog ){\r\n            // если страница каталога - просто добавляем обработчики событий\r\n            this.addCardListeners();\r\n        }\r\n    }\r\n\r\n    /**\r\n    * добавление обработчиков событий в карточках товаров\r\n    */\r\n    addCardListeners(){\r\n\r\n        // получаем карточки товаров\r\n        let catalogPrevs = this.catalog.querySelectorAll('.catalog-card__preview');\r\n\r\n        catalogPrevs.forEach(function(item){\r\n\r\n            // получаем изображения для каждой карточки\r\n            var thumbs = item.querySelectorAll('.catalog-card__thumbs ul li img');\r\n            var previewItem = item;\r\n            \r\n            thumbs.forEach(function(thumb){\r\n    \r\n                thumb.addEventListener('click', function(e){\r\n    \r\n                    e.preventDefault();\r\n                    previewItem.style.backgroundImage = 'url('+thumb.src+')';\r\n                });\r\n            });\r\n        });\r\n    \r\n        // обработка нажатия на кнопку ДОБАВИТЬ В КОРЗИНУ\r\n        var toCartBtn = this.catalog.querySelectorAll('.catalog-card__to-cart');\r\n\r\n        toCartBtn.forEach( function( item ){\r\n\r\n            item.addEventListener('click', function(e){\r\n\r\n                var el = e.target.closest('.catalog-card__to-cart' );\r\n                if ( el ){\r\n\r\n                    cart.add(el.dataset.product_id)\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Добавление обработчиков кнопок категорий\r\n     */\r\n    addCategoriesListeners( args ){\r\n\r\n        // определяем конфигурации функции\r\n        var conf = Object.assign( {\r\n            lookbook: false\r\n        }, args  );\r\n\r\n        // кнопка категорий в мобильной версии\r\n        var categoriesBtn = this.catalog.querySelector('.catalog-categories__show-button');\r\n        var categoriesList = this.catalog.querySelector('.catalog-categories__list');\r\n        var categoriesListItems = this.catalog.querySelectorAll('.catalog-categories__list a');\r\n\r\n        if ( categoriesBtn !== null){\r\n    \r\n            categoriesBtn.addEventListener('click', function(e){\r\n                e.preventDefault();\r\n                categoriesList.classList.toggle('show');\r\n            });\r\n        }\r\n        var parrent = this;\r\n        categoriesListItems.forEach(function( item ){\r\n           item.addEventListener('click', function(event){\r\n               event.preventDefault();\r\n               var category = event.target.dataset.category;\r\n               parrent.currentCategory = category;\r\n               parrent.getCategoryItems({\r\n                   lookbook: conf.lookbook\r\n               });\r\n           });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Получение товаров/лукбуков категории\r\n     */\r\n    getCategoryItems( args ){\r\n\r\n        // определяем конфигурации функции\r\n        var conf = Object.assign( {\r\n            lookbook: false,\r\n            page: 1\r\n        }, args  );\r\n    \r\n        // получаем элемент каталога\r\n        var catalogCards = this.catalog.querySelector('.catalog-cards');\r\n\r\n        // определяем url для запроса\r\n        if ( conf.lookbook ){\r\n            if ( conf.page ){\r\n\r\n                var reqUrl = '/wp-json/lookbook/v1/get/' + this.currentCategory + '/' + conf.page;\r\n            } else {\r\n                \r\n                var reqUrl = '/wp-json/lookbook/v1/get/' + this.currentCategory;\r\n            }\r\n        } else {\r\n            var reqUrl = '/wp-json/catalog/v1/get/' + this.currentCategory;\r\n        }\r\n\r\n        // сохраняем this в parrent\r\n        var parrent = this; \r\n        // создаем запрос\r\n        var catalogRequest = createGetRequest( reqUrl, function( event ){\r\n    \r\n            // если запрос выполнен не полностью - выходим\r\n            if( event.target.readyState != 4) return;\r\n            // если пустой ответ - выходим\r\n            if( event.target.responseText == \"\" ) return;\r\n    \r\n            var resJSON = JSON.parse(event.target.responseText);\r\n    \r\n            // очищае текущий элемент каталога если первая страница\r\n            if( conf.page == 1 ){\r\n                catalogCards.innerHTML = '';\r\n            }\r\n\r\n            console.log(resJSON);\r\n    \r\n            // если каталог лукбуков - добавляем карточки лукбуков\r\n            if( conf.lookbook ){\r\n\r\n                resJSON.forEach ( function( item ){\r\n\r\n                    // если последний элемент - устанавливаем атрибуит isEnd\r\n                    if( item.isEnd ) parrent.isEnd = true;\r\n\r\n                    catalogCards.appendChild( lookbookCard.create( item ) );\r\n                });\r\n            } else {\r\n    \r\n                // иначе выводим товары\r\n                resJSON.forEach ( function( product ){\r\n\r\n                    // если последний элемент - устанавливаем атрибуит isEnd\r\n                    if( item.isEnd ) parrent.isEnd = true;\r\n\r\n                    catalogCards.appendChild( catalogCard.create( product ) );\r\n                });\r\n            }\r\n\r\n            //устанавливаем значение номера текущей страницы\r\n            parrent.currentPage = conf.page;\r\n    \r\n            // добавляем обработчики событий\r\n            parrent.addCardListeners();\r\n\r\n            // убираем флаг isLoad\r\n            parrent.isLoad = false;\r\n    \r\n        });\r\n    \r\n        // отпраавляем запрос\r\n        catalogRequest.send();\r\n    \r\n    }\r\n\r\n    /**\r\n     * Проверка на скрол к нижнему краю лукбука\r\n     */\r\n    isCatalogBotton(){\r\n\r\n        var catalogPosition = this.lbCatalog.getBoundingClientRect();\r\n        var catalogBottomOffset = catalogPosition.top + catalogPosition.height;\r\n\r\n        if( catalogBottomOffset <= window.innerHeight + 200 ){\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Загрузка лукбуков при скролле\r\n     */\r\n    addScrollListener(){\r\n\r\n        var parrent = this;\r\n        window.addEventListener('scroll', function( e ){\r\n\r\n           if( parrent.isCatalogBotton() && !parrent.isLoad && !parrent.isEnd){\r\n\r\n            parrent.isLoad = true;\r\n            parrent.getCategoryItems({\r\n                page: parrent.currentPage + 1,\r\n                lookbook: true\r\n            })\r\n           }\r\n        });\r\n    }\r\n}\r\n\r\nmodule.exports ={\r\n\r\n    init: function(){\r\n\r\n        let catalog = new Catalog;        \r\n\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/catalog.js?");

/***/ }),

/***/ "./src/catalogCard.js":
/*!****************************!*\
  !*** ./src/catalogCard.js ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/**\r\n * Catalog card\r\n */\r\n\r\n module.exports = {\r\n\r\n    create: function( product ){\r\n\r\n        var card = document.createElement('li');\r\n        card.classList.add('catalog-cards__item');\r\n        card.classList.add('catalog-card');\r\n\r\n        var price = '<span class=\"price\"><sup>' + product.currencySymbol + '</sup>' + product.price + '</span>';\r\n        // если действует акция\r\n        if ( product.price != product.regularPrice ){\r\n\r\n            price = '<span class=\"price old-price\"><sup>£</sup>' + product.regularPrice + '</span>' + price;\r\n        }\r\n        card.innerHTML = `\r\n        <div class=\"catalog-card__wrap\">\r\n\r\n\t    \t<a href=\"${product.url}\" class=\"catalog-card__preview-wrap\">\r\n\t    \t\t<div class=\"catalog-card__preview\" style=\"background-image: url(${product.thumb});\">\r\n                    <div class=\"catalog-card__price\">\r\n\t    \t\t\t\t${price}\r\n\t    \t\t\t</div>\r\n\t    \t\t\t<div class=\"catalog-card__thumbs\">\r\n\t    \t\t\t\t<ul>\r\n\t    \t\t\t\t\t<li><img src=\"${product.thumb}\" alt=\"\"></li>\r\n\t    \t\t\t\t\t<li><img src=\"${product.gallery}\" alt=\"\"></li>\r\n\t    \t\t\t\t</ul>\r\n\t    \t\t\t</div>\r\n\t    \t\t\t<button class=\"catalog-card__info-icon\">\r\n\t    \t\t\t\t<i class=\"fas fa-info-circle\"></i>\r\n\t    \t\t\t</button>\r\n\t    \t\t</div><!-- catalog-card__preview -->\r\n\t    \t</a>\r\n\t    \t<div class=\"catalog-card__desc\">\r\n                <h2>\r\n                    ${product.title} <span class=\"price\"><sup>${product.currencySymbol}</sup>${product.price}</span>\r\n                </h2>\r\n                    ${product.desc}\r\n                <div class=\"catalog-card__buttons\">\r\n                    <ul>\r\n                        <li><button class=\"catalog-card__to-cart\" data-product_id=\"${product.ID}\" data-quantity=\"1\" rel=\"nofollow\"><i class=\"fas fa-shopping-cart\"></i></button></li>\r\n                        <li><button><i class=\"far fa-heart\"></i></button></li>\r\n                        <li><button><i class=\"fas fa-compress-alt\"></i></button></li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n\t    </div><!-- catalog-card__wrap -->\r\n        `;\r\n\r\n        return card;\r\n    }\r\n }\n\n//# sourceURL=webpack:///./src/catalogCard.js?");

/***/ }),

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/**\r\n * Entry webpack\r\n */\r\n\r\nvar menu = __webpack_require__(/*! ./menu.js */ \"./src/menu.js\");\r\nvar cart = __webpack_require__(/*! ./cart.js */ \"./src/cart.js\");\r\nvar catalog = __webpack_require__(/*! ./catalog.js */ \"./src/catalog.js\");\r\nvar product = __webpack_require__(/*! ./product/product.js */ \"./src/product/product.js\");\r\nvar signup = __webpack_require__(/*! ./signup/signup.js */ \"./src/signup/signup.js\");\r\nvar localStores = __webpack_require__(/*! ./localStores/localStores.js */ \"./src/localStores/localStores.js\");\r\n\r\n\r\ndocument.addEventListener('DOMContentLoaded', function(){\r\n\r\n    menu.init();\r\n\r\n    // корзина\r\n    cart.init();\r\n    \r\n    // инициализация страницы товара\r\n    product.init();\r\n\r\n    // Инициализация карточек товара\r\n    catalog.init();\r\n\r\n    // Инициализация форм авторизации\r\n    signup.init();\r\n\r\n    // инициализация страницы Local stores\r\n    localStores.init();\r\n});\n\n//# sourceURL=webpack:///./src/index.js?");

/***/ }),

/***/ "./src/localStores/localStores.js":
/*!****************************************!*\
  !*** ./src/localStores/localStores.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("\r\n/**\r\n * Запрос финформации о магазине\r\n */\r\nfunction createGetRequest( id ){\r\n    request = new XMLHttpRequest();\r\n    request.open('GET', '/wp-json/stores/v1/get/' + id);\r\n    request.setRequestHeader('Content-Type', 'application/json');\r\n    request.addEventListener(\"readystatechange\", function( e ){\r\n        // если запрос выполнен не полностью - выходим\r\n        if( e.target.readyState != 4) return;\r\n        // если пустой ответ - выходим\r\n        if( e.target.responseText == \"\" ) return;\r\n        // парсим результат запроса\r\n        var resJSON = JSON.parse(e.target.responseText);\r\n        // рисуем полученные элементы\r\n        render(resJSON);\r\n    });\r\n    return request;\r\n}\r\n\r\n/**\r\n * Отрисовка\r\n */\r\nfunction render( data ){\r\n\r\n    if ( !data ) return;\r\n\r\n    var mapElement = document.querySelector('.local-desc__map');\r\n    var titleElement = document.querySelector('.local-desc__title');\r\n    var addressElement = document.querySelector('.local-desc__address');\r\n    var descElement = document.querySelector('.local-desc__desc');\r\n    var address2Element = document.querySelector('.local-desc__address2');\r\n    var phoneElement = document.querySelector('.local-desc__phone');\r\n    var urlElement = document.querySelector('.local-desc__url');\r\n    var emailElement = document.querySelector('.local-desc__email');\r\n    var sheduleElement = document.querySelector('.local-desc__shedule');\r\n\r\n    mapElement.style.backgroundImage = 'url(' + data.map + ')';\r\n    titleElement.innerHTML = data.title;\r\n    addressElement.innerHTML = data.address;\r\n    descElement.innerHTML = data.desc;\r\n    address2Element.innerHTML = '<i class=\"fas fa-map-marker-alt\"></i>' + data.address;\r\n    phoneElement.innerHTML = '<a href=\"tel:' + data.phone + '\"><i class=\"fas fa-phone-alt\"></i>' + data.phone + '</a>';\r\n    urlElement.innerHTML = '<a href=\"' + data.url + '\"><i class=\"fas fa-link\"></i>' + data.url + '</a>';\r\n    emailElement.innerHTML = '<a href=\"mailto:' + data.email + '\"><i class=\"far fa-envelope\"></i>' + data.email + '</a>';\r\n    sheduleElement.innerHTML = '<i class=\"far fa-clock\"></i>' + data.shedule;\r\n}\r\n\r\nmodule.exports = {\r\n\r\n    init: function(){\r\n\r\n        // находим все кнопки просмотра магазинов\r\n        var localsButtons = document.querySelectorAll('.locals__item .locals__button');\r\n        // если на странице нет кнопок - выходим\r\n        if ( !localsButtons ) return;\r\n        // добавляем обработчика нажатий\r\n        localsButtons.forEach( function( button ){\r\n\r\n            button.addEventListener('click', function(e){\r\n                e.preventDefault();\r\n\r\n                // ищем элемент кнопки\r\n                var el = e.target.closest('.locals__button');\r\n                if ( el ){\r\n                    // передаем атрибут data-store_id в запрос\r\n                    var req = createGetRequest( el.dataset.store_id);\r\n                    req.send();\r\n                }\r\n            });\r\n        });\r\n    }\r\n}\n\n//# sourceURL=webpack:///./src/localStores/localStores.js?");

/***/ }),

/***/ "./src/lookbookCard.js":
/*!*****************************!*\
  !*** ./src/lookbookCard.js ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/**\r\n * Lookbook card\r\n */\r\n\r\nmodule.exports = {\r\n\r\n    create: function( lookbook ){\r\n\r\n        var card = document.createElement('li');\r\n        card.classList.add('catalog-cards__item');\r\n        card.classList.add('catalog-card');\r\n\r\n        var price = '<span class=\"price\"><sup></sup></span>';\r\n        if( lookbook.isBanner ){\r\n            card.innerHTML = `\r\n            <div class=\"catalog-card__wrap\">\r\n\t        \t<div class=\"catalog-card__preview-wrap\">\r\n\t        \t\t<div class=\"catalog-card__preview\" style=\"background-image: url(${lookbook.thumb});\">\r\n                        <div class=\"catalog-card__banner catalog-banner\">\r\n                            ${lookbook.content}\r\n                            <a href=\"#\" class=\"transparrent-button\">${lookbook.buttonText}</a>\r\n\t        \t\t\t</div>\r\n\t        \t\t</div><!-- catalog-card__preview -->\r\n\t        \t</div>\r\n\t        </div><!-- catalog-card__wrap -->\r\n            `;\r\n\r\n            card.style.gridColumn = \"span \" + lookbook.width\r\n        } else {\r\n            card.innerHTML = `\r\n            <div class=\"catalog-card__wrap\">\r\n\t        \t<a href=\"\" class=\"catalog-card__preview-wrap\">\r\n\t        \t\t<div class=\"catalog-card__preview\" style=\"background-image: url(${lookbook.thumb});\">\r\n                        <div class=\"catalog-card__price\">\r\n\t        \t\t\t\t${price}\r\n\t        \t\t\t</div>\r\n\t        \t\t\t<button class=\"catalog-card__info-icon\">\r\n\t        \t\t\t\t<i class=\"fas fa-info-circle\"></i>\r\n\t        \t\t\t</button>\r\n\t        \t\t</div><!-- catalog-card__preview -->\r\n\t        \t</a>\r\n\t        </div><!-- catalog-card__wrap -->\r\n            `;\r\n        }\r\n\r\n        return card;\r\n    }\r\n }\n\n//# sourceURL=webpack:///./src/lookbookCard.js?");

/***/ }),

/***/ "./src/menu.js":
/*!*********************!*\
  !*** ./src/menu.js ***!
  \*********************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/**\r\n * Header menu\r\n */\r\n\r\n module.exports = {\r\n\r\n    init: function(){\r\n\r\n        // добавляем обработчик нажатия кнопки меню\r\n        var showMenuButton = document.querySelector('.show-menu-button');\r\n        var closeMenuButton = document.querySelector('.close-menu-button');\r\n        var menu = document.querySelector('.header-menu__wrap');\r\n        \r\n        showMenuButton.addEventListener('click', function(e){\r\n            e.preventDefault();\r\n            \r\n            menu.classList.add('show');\r\n        });\r\n    \r\n        closeMenuButton.addEventListener('click', function(e){\r\n            e.preventDefault();\r\n            \r\n            menu.classList.remove('show');\r\n        });\r\n    }\r\n }\n\n//# sourceURL=webpack:///./src/menu.js?");

/***/ }),

/***/ "./src/product/product.js":
/*!********************************!*\
  !*** ./src/product/product.js ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/**\r\n * Product\r\n */\r\nvar cart = __webpack_require__(/*! ../cart.js */ \"./src/cart.js\");\r\nvar productPreview = __webpack_require__(/*! ./productPreview.js */ \"./src/product/productPreview.js\");\r\n\r\n /**\r\n  * обработчики событий элементов\r\n  */\r\nfunction addListeners(){\r\n\r\n\r\n    // обработчик кнопок QTY\r\n    var qtyInput = document.querySelector('#qtyInput');\r\n    var qtyPlusBtn = document.querySelector('.qty-selector__up');\r\n    var qtyMinusBtn = document.querySelector('.qty-selector__down');\r\n\r\n    if ( qtyInput !== null){\r\n\r\n        qtyPlusBtn.addEventListener('click', function(e){\r\n\r\n            e.preventDefault();\r\n            qtyInput.value++;\r\n        });\r\n\r\n        qtyMinusBtn.addEventListener('click', function(e){\r\n\r\n            e.preventDefault();\r\n            if (qtyInput.value > 1) qtyInput.value--;\r\n        });\r\n    }\r\n\r\n    // кнопка ДОБАВИТЬ В КОРЗИНУ\r\n    var toCartButton = document.querySelector('.product__buttons .add-to-cart');\r\n    \r\n    toCartButton.addEventListener('click', function(e){\r\n\r\n        e.preventDefault();\r\n\r\n        // получаем QTY\r\n        var qtyInput = document.querySelector('#qtyInput');\r\n        var qty = qtyInput.value;\r\n\r\n        var toCartButton = e.target.closest('.add-to-cart');\r\n        if ( toCartButton ){\r\n            // добавляем в корзину по атрибуту кнопки data-product_id\r\n            cart.add(toCartButton.dataset.product_id, qty);\r\n        }\r\n    });\r\n}\r\n\r\nmodule.exports = {\r\n\r\n    init: function(){\r\n\r\n        var product = document.querySelector('.product');\r\n        if ( !product ) return;\r\n        addListeners();\r\n        productPreview.init();\r\n    }\r\n}\n\n//# sourceURL=webpack:///./src/product/product.js?");

/***/ }),

/***/ "./src/product/productPreview.js":
/*!***************************************!*\
  !*** ./src/product/productPreview.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/*\r\n * Product preview\r\n */\r\n\r\n/**\r\n * Получаем ссылки на картинки\r\n */\r\nfunction getGallery( list ){\r\n\r\n    // создаем объект для рабты с ссылками\r\n    var res = {\r\n\r\n        current: 0,\r\n        links: [],\r\n\r\n        // возвращает ссылку на следующую картинку галереи\r\n        next: function(){\r\n\r\n            this.current++;\r\n            if ( this.current >= this.links.length ) this.current = 0;\r\n            return this.links[this.current];\r\n        },\r\n\r\n        // возвращает предыдущую\r\n        prev: function(){\r\n\r\n            this.current--;\r\n            if ( this.current < 0 ) this.current = this.links.length - 1;\r\n            return this.links[this.current];\r\n        }\r\n    }\r\n\r\n    // получаем ссылки\r\n    list.forEach( function( item ){\r\n\r\n        res.links.push(item.innerHTML);\r\n    });\r\n\r\n    return res;\r\n}\r\n\r\nmodule.exports = {\r\n\r\n    init: function(){\r\n\r\n        // получаем элементы\r\n        var preview = document.querySelector('.product-preview');\r\n        var list = document.querySelectorAll('ul.product-preview__links li');\r\n        var prevButton = document.querySelector('.product-preview__prev');\r\n        var nextButton = document.querySelector('.product-preview__next');\r\n\r\n        // получаем галерею картинок\r\n        var gallery =  getGallery( list );\r\n\r\n        // обработчики нажатия назад-вперед\r\n        prevButton.addEventListener('click', function(e){\r\n\r\n            e.preventDefault();\r\n            preview.style.backgroundImage = 'url(' + gallery.prev() + ')';\r\n        });\r\n        nextButton.addEventListener('click', function(e){\r\n\r\n            e.preventDefault();\r\n            preview.style.backgroundImage = 'url(' + gallery.next() + ')';\r\n\r\n        });\r\n    }\r\n}\n\n//# sourceURL=webpack:///./src/product/productPreview.js?");

/***/ }),

/***/ "./src/signup/signup.js":
/*!******************************!*\
  !*** ./src/signup/signup.js ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/**\r\n * Обраотка форм регистрации\r\n */\r\n\r\n var ajax = __webpack_require__(/*! ../ajax.js */ \"./src/ajax.js\");\r\n\r\n/**\r\n * Проверка введенных данных\r\n */\r\nfunction checkForm ( data ){\r\n\r\n    // если нет даннных - выходим\r\n    if ( !data ) return;\r\n\r\n    // результат проверок\r\n    res = {\r\n        email: false,\r\n        pass: false,\r\n        confirm: false,\r\n    };\r\n\r\n    // проверка корректности email\r\n    if ( data.email ){\r\n\r\n        if ( data.email.match(/\\S+@\\S+\\.\\S+/) ){\r\n\r\n            res.email = true;\r\n        }\r\n    }\r\n\r\n    // проверка корректности пароля и подтвержения\r\n    if ( data.pass && data.confirm ){\r\n        \r\n        // проверяем снова\r\n        if ( data.pass === data.confirm && !data.pass.match(/\\s/g) ){\r\n\r\n            res.pass = true;\r\n            res.confirm = true;            \r\n        }\r\n    }\r\n\r\n    // устанавливаем атрибут корректности данных вцелом\r\n    var correct = true;\r\n    for ([key, value] of Object.entries(res)){\r\n\r\n        if ( value == false ) correct = false;\r\n    }\r\n    Object.assign( res, {isCorrect: correct})\r\n\r\n    return res;\r\n}\r\n\r\n/**\r\n * Получение cart key из cookie\r\n */\r\nfunction getCartKey(){\r\n\r\n    var key = document.cookie.match(/wp_cocart_session_.*=.*%7C%7C/);\r\n    if( !key ) return undefined;\r\n    key = key[0].split('=')[1];\r\n    key = key.split('%7C%7C')[0];\r\n    return key;\r\n}\r\n\r\n/**\r\n * Отображение ошибок\r\n */\r\nfunction showErrors ( data ){\r\n\r\n    // если нет даннных - выходим\r\n    if ( !data ) return;\r\n\r\n    var emailField = document.querySelector('.login__register form input[name=email]');\r\n    var passField = document.querySelector('.login__register form input[name=pass]');\r\n    var confirmField = document.querySelector('.login__register form input[name=confirm_pass]');\r\n    var messageField = document.querySelector('.login__register .login-form__error-message');\r\n    var message = '';\r\n\r\n    if ( data.message ) message = data.message+'\\n';\r\n    \r\n    if ( data.email == false ){\r\n\r\n        emailField.classList.add('error');\r\n        message = message + 'Некорректный Email\\n';\r\n    } else {\r\n        emailField.classList.remove('error');\r\n    }\r\n\r\n    if ( data.pass == false ){\r\n\r\n        passField.classList.add('error');\r\n        message = message + 'Некорректный пароль\\n';\r\n    } else {\r\n\r\n        passField.classList.remove('error');\r\n    }\r\n\r\n    if ( data.confirm == false ){\r\n\r\n        confirmField.classList.add('error');\r\n        message = message + 'Подтверждение пароля не совпадает\\n';\r\n    } else {\r\n\r\n        confirmField.classList.remove('error');\r\n    } \r\n\r\n    messageField.innerText = message;\r\n\r\n}\r\n\r\n/**\r\n * Запрос регистрации нового пользователя\r\n */\r\nfunction newUserRequest( callback ){\r\n\r\n    var request = new XMLHttpRequest();\r\n    request.open( 'POST', '/wp-json/users/v1/add');\r\n    request.setRequestHeader('Content-Type', 'application/json');\r\n    request.addEventListener('readystatechange', callback);\r\n    return request;\r\n}\r\n\r\n/**\r\n * Форма регистрации\r\n */\r\nfunction initRegisterForm(){\r\n\r\n    var form = document.querySelector('.login__register form');\r\n    \r\n    // Если формы нет на странице - выходим\r\n    if ( !form ) return;\r\n\r\n    var submitButton = document.querySelector('.login__register .login-form__submit button');\r\n\r\n    // Обработка нажатия на кнопку отправки\r\n    submitButton.addEventListener('click', function(e){\r\n\r\n        e.preventDefault();\r\n\r\n        // получаем значения полей формы\r\n        var formFields = {\r\n            email: form.email.value,\r\n            pass: form.pass.value,\r\n            confirm: form.confirm_pass.value,\r\n            signup: form.sign_updates.checked\r\n        };\r\n        // проверяем корректность данных формы\r\n        var res = checkForm(formFields);\r\n\r\n        // выводим ошибки\r\n        showErrors(res);\r\n\r\n        // Если данные корректные - отправляем запрос на сервер\r\n        if ( res.isCorrect ){\r\n\r\n            var request = newUserRequest( function(e){\r\n\r\n                // обработка ответа сервера\r\n\r\n                // если запрос выполнен не полностью - выходим\r\n                if( e.target.readyState != 4) return;\r\n                // если пустой ответ - выходим\r\n                if( e.target.responseText == \"\" ) return;\r\n                // парсим результат запроса\r\n                var resJSON = JSON.parse(e.target.responseText);\r\n                // показываем ошибки\r\n                showErrors(resJSON);\r\n\r\n                // если пользователь создан\r\n                if ( resJSON.isCorrect ){\r\n\r\n                    // сохряняем cart key\r\n                   var cartKey = getCartKey();\r\n                   // выполняем авторизацию\r\n                   var loginRequest = ajax.createRequest(\r\n                       'POST',\r\n                       '/wp-json/users/v1/login',\r\n                       function( e ){\r\n                           // если запрос выполнен не полностью - выходим\r\n                            if( e.target.readyState != 4) return;\r\n                            // если пустой ответ - выходим\r\n                            if( e.target.responseText == \"\" ) return;\r\n\r\n                            if( cartKey ){\r\n                                // если в корзине есть товары, добавляем их из сессии\r\n                                document.location.href = '/?cocart-load-cart=' + cartKey + '&keep-cart=false';\r\n                            } else {\r\n                                //иначе - просто перенаправляем на главную страницу\r\n                                document.location.href = '/';\r\n                            }\r\n                       }\r\n                   );\r\n                   loginRequest.send(JSON.stringify(formFields));\r\n                }\r\n            });\r\n\r\n            // отправляем значения полей формы\r\n            request.send(JSON.stringify(formFields));\r\n        }\r\n        \r\n    });\r\n}\r\n\r\n/**\r\n * Форма авторизации\r\n */\r\nfunction initLoginForm(){\r\n\r\n    var form = document.querySelector('.login-form form');\r\n    // Если формы нет на странице - выходим\r\n    if ( !form ) return;\r\n\r\n    form.addEventListener('submit', function( e ){\r\n\r\n        e.preventDefault();\r\n\r\n        // получаем значения полей формы\r\n        var formFields = {\r\n            email: form.log.value,\r\n            pass: form.pwd.value,\r\n        };\r\n\r\n        // сохряняем cart key\r\n        var cartKey = getCartKey();\r\n        // находим блок с сообщение об ошибке\r\n        var errorElement = form.querySelector('.login-form__error-message');\r\n        // очищаем\r\n        errorElement.innerHTML = '';\r\n        // проверяем заполены ли поля\r\n        if( !formFields.email || !formFields.pass ){\r\n            errorElement.innerText = 'Заполнены не все поля';\r\n            return;\r\n        }\r\n        // создаем запрос авторизации\r\n        var loginRequest = ajax.createRequest(\r\n            'POST',\r\n            '/wp-json/users/v1/login',\r\n            function( e ){\r\n                // если запрос выполнен не полностью - выходим\r\n                if( e.target.readyState != 4) return;\r\n                // если пустой ответ - выходим\r\n                if( e.target.responseText == \"\" ) return;\r\n\r\n                var resJSON = JSON.parse(e.target.responseText);\r\n                \r\n                if( resJSON.status === 'success'){\r\n                    // если получилось авторизироваться\r\n                    if( cartKey ){\r\n                        // если в корзине есть товары, добавляем их из сессии\r\n                        document.location.href = '/?cocart-load-cart=' + cartKey + '&keep-cart=false';\r\n                    } else {\r\n                        //иначе - просто перенаправляем на главную страницу\r\n                        document.location.href = '/';\r\n                    }\r\n                } else {\r\n                    //иначе выводим сообщение об ошибке\r\n                    errorElement.innerText = 'Неправильное имя пользователя или пароль';\r\n\r\n                }\r\n            }\r\n\r\n        );\r\n        loginRequest.send(JSON.stringify(formFields));\r\n\r\n    });\r\n}\r\n\r\nmodule.exports = {\r\n\r\n    init: function(){     \r\n        \r\n        initLoginForm();\r\n        initRegisterForm();\r\n    }\r\n}\n\n//# sourceURL=webpack:///./src/signup/signup.js?");

/***/ })

/******/ });